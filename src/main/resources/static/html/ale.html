<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">

    <title>Cadastro - Confirmação de Conta</title>

    <!-- Script EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

    <style>
      body {
        background: linear-gradient(to right, #1B4965, #3E4C59, #1B4965);
        height: 100vh;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        font-family: Arial, sans-serif;
        overflow: hidden;
      }

      .background-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 10vw;
        font-weight: 700;
        color: rgba(255, 255, 255, 0.05);
        white-space: nowrap;
        font-family: 'Montserrat', sans-serif;
        z-index: 0;
        pointer-events: none;
      }

      .register-box {
        background: transparent;
        padding: 40px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        width: 100%;
        max-width: 400px;
        position: relative;
        z-index: 1;
        color: white;
      }

      .register-box h2 {
        margin-bottom: 30px;
        font-weight: bold;
        text-align: center;
        color: white;
      }

      .form-control {
        background-color: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
      }

      .form-control::placeholder {
        color: rgba(255, 255, 255, 0.7);
      }

      .form-control:focus {
        background-color: rgba(255, 255, 255, 0.15);
        color: white;
        border-color: white;
        box-shadow: none;
      }

      .form-control option {
        background-color: #1B4965;
        color: white;
      }

      .form-control option:checked {
        background-color: #163d55;
        color: white;
      }

      .btn-custom {
        background-color: #ffffff;
        color: #1b4965;
        font-weight: bold;
      }

      .btn-custom:hover {
        background-color: #f0f0f0;
        color: #163d55;
      }

      a {
        color: rgba(255, 255, 255, 0.8);
      }

      a:hover {
        color: white;
        text-decoration: underline;
      }

      .hidden {
        display: none;
      }
    </style>

    <script>
      // Inicializa EmailJS
      window.onload = function () {
        emailjs.init("GvIi-4wTVAijBYoYP"); 
      };

      function enviarEmail(event) {
        event.preventDefault();

        // Coleta dados do formulário
        const params = {
          nome: document.getElementById("username").value,
          email: document.getElementById("email").value,
          matricula: document.getElementById("matricula").value || "Não informado"
        };

        const password = document.getElementById("password").value;
        const confirmPassword = document.getElementById("confirm-password").value;

        if (password !== confirmPassword) {
            alert("As senhas não coincidem. Por favor, verifique.");
            return;
        }

        // Envia e-mail
        emailjs.send("service_r3r3cyh", "template_dbm1aqg", params)
          .then(() => {
            alert("Conta criada com sucesso! Um e-mail de confirmação foi enviado.");
          })
          .catch((error) => {
            console.error("Erro ao enviar e-mail:", error);
            alert("Ocorreu um erro ao enviar o e-mail.");
          });
      }

      // Mostrar/esconder matrícula
      document.addEventListener('DOMContentLoaded', function() {
          const tipoSelect = document.getElementById('tipo');
          const matriculaGroup = document.getElementById('matricula-group');
          const matriculaInput = document.getElementById('matricula');

          tipoSelect.addEventListener('change', function () {
              if (this.value === 'usuario') {
                  matriculaGroup.classList.remove('hidden');
                  matriculaInput.setAttribute('required', 'required');
              } else {
                  matriculaGroup.classList.add('hidden');
                  matriculaInput.removeAttribute('required');
              }
          });

          if (tipoSelect.value !== 'usuario') {
             matriculaGroup.classList.add('hidden');
             matriculaInput.removeAttribute('required');
          }
      });
    </script>
  </head>
  <body>

    <div class="background-text">CARREIRA IDEAU</div>

    <div class="register-box">
      <h2>Cadastro</h2>
      <form onsubmit="enviarEmail(event)">
        <div class="form-group">
          <label for="tipo">Tipo de usuário</label>
          <select class="form-control" id="tipo" required>
            <option value="">Selecione...</option>
            <option value="usuario">Sou um usuário</option>
            <option value="empresa">Sou uma empresa</option>
          </select>
        </div>

        <div class="form-group">
          <label for="email">E-mail</label>
          <input type="email" class="form-control" id="email" placeholder="Digite seu e-mail" required />
        </div>

        <div class="form-group">
          <label for="username">Nome de usuário</label>
          <input type="text" class="form-control" id="username" placeholder="Digite seu nome de usuário" required />
        </div>

        <div class="form-group hidden" id="matricula-group">
          <label for="matricula">Matrícula</label>
          <input type="text" class="form-control" id="matricula" placeholder="Digite sua matrícula" />
        </div>

        <div class="form-group">
          <label for="password">Senha</label>
          <input type="password" class="form-control" id="password" placeholder="Digite sua senha" required />
        </div>

        <div class="form-group">
          <label for="confirm-password">Confirme a senha</label>
          <input type="password" class="form-control" id="confirm-password" placeholder="Confirme sua senha" required />
        </div>

        <button type="submit" class="btn btn-custom btn-block">Criar conta</button>
      </form>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
      integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
      integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
      crossorigin="anonymous"
    ></script>

    <script src="js/teladecadastro.js"></script>

  </body>
</html>